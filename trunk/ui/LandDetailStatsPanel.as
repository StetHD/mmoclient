package ui {		import flash.display.MovieClip;	import game.entity.Improvement;	import game.map.Tile;	import game.Claim;	import game.Kingdom;	import game.KingdomManager;			public class LandDetailStatsPanel extends MovieClip 	{		public static var PROGRESS_START_X:int = 18;		public static var PROGRESS_START_Y:int = 17;		public static var PROGRESS_SPACER_X:int = 2;				public var xCoord:int;		public var yCoord:int;				public var landDetailImprovement:StructureEntry;		public var nothingHere:MovieClip;				public var wild:MovieClip;		public var claiming:LandDetailClaiming;				private var improvement:Improvement;		private var claim:Claim;				public function LandDetailStatsPanel() 		{			// constructor code		}				public function showPanel() : void		{			setLandDetailImprovement(); 		}				private function setLandDetailImprovement() : void		{			improvement = Improvement.getImprovementFromPos(xCoord, yCoord);						if(improvement != null)			{				landDetailImprovement.visible = true;				nothingHere.visible = false;								landDetailImprovement.nameText.text = improvement.getName();				landDetailImprovement.levelText.text = "";				landDetailImprovement.hpText.text = "";				landDetailImprovement.setImage(improvement.getImage());			}			else			{				nothingHere.visible = true;				landDetailImprovement.visible = false;			}					}				public function setClaim(claim:Claim) : void		{			this.claim = claim;						if(claim.id == Claim.INVALID)			{				wild.visible = true;				claiming.visible = false;			}			else			{				setEmpireName();								if(claim.state == Claim.STATE_CLAIM)				{					setProgressIcons(claim.createdTime);										claiming.claimStatus.text = "Claiming";					claiming.visible = true;					wild.visible = false;				}				else				{					claiming.claimStatus.text = "Claimed";					claiming.visible = true;					wild.visible = false;									}			}		}				private function setProgressIcons(createdTime:Number) : void		{			trace("createTime: " + createdTime)			var progressRatio:Number = 0;			var date:Date = new Date();			var currentTime:Number = date.getTime() / 1000;			var diffTime:int = currentTime - createdTime;						progressRatio = diffTime / Claim.DURATION;						trace("diffTime: " + diffTime + " currentTime: " + currentTime);						var numProgressIcons:int = Math.floor(progressRatio * 11);						trace(numProgressIcons);						for(var i:int = 0; i < numProgressIcons; i++)			{				var progressIcon:MovieClip = new QueueProgressIcon();								progressIcon.x = PROGRESS_START_X + i * (progressIcon.width + PROGRESS_SPACER_X);				progressIcon.y = PROGRESS_START_Y;								claiming.addChild(progressIcon);			}					}						private function setEmpireName() : void		{			var kingdom:Kingdom = KingdomManager.INSTANCE.getKingdomByCity(claim.cityId);						if(kingdom != null)			{				claiming.empireName.text = kingdom.name;			}		}					}	}